<div class="container py-4 ms-150" style="margin-left: 200px;">

<h3 class="mb-4 text-primary ms-150">üë©‚Äçüéì Ajouter un √©l√®ve</h3>

  <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="shadow-sm p-4 bg-white rounded ms-150">
    <!-- ETAPES -->
    <div class="mb-4 ms-150
">
      <div class="progress" style="height: 8px;">
        <div class="progress-bar bg-primary" role="progressbar" [style.width.%]="currentStep * 25"></div>
      </div>
      <div class="text-end mt-1 small text-muted">√âtape {{ currentStep }} / 4</div>
    </div>

    <!-- √âTAPE 1 ‚Äî Infos √©l√®ve -->
    <div *ngIf="currentStep === 1" class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Pr√©nom de l'√©l√®ve</label>
        <input type="text" formControlName="student_first_name" class="form-control" placeholder="ex. Fatou" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Nom de l'√©l√®ve</label>
        <input type="text" formControlName="student_last_name" class="form-control" placeholder="ex. Ndiaye" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Date de naissance</label>
        <input type="date" formControlName="student_birthday" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Sexe</label>
        <select class="form-select" formControlName="student_gender">
          <option value="">-- S√©lectionnez --</option>
          <option value="M">Masculin</option>
          <option value="F">F√©minin</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">T√©l√©phone</label>
        <input type="text" formControlName="student_phone" class="form-control" placeholder="77xxxxxxx" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Email</label>
        <input type="email" formControlName="student_email" class="form-control" />
      </div>
      <div class="col-12">
        <label class="form-label">Adresse</label>
        <textarea formControlName="student_adress" class="form-control" rows="2" placeholder="Adresse compl√®te..."></textarea>
      </div>
      <div class="col-md-6">
        <label class="form-label">Photo de l'√©l√®ve</label>
        <input type="file" (change)="onStudentPhotoFileChange($event)" class="form-control" />
      </div>
    </div>

    <!-- √âTAPE 2 ‚Äî Infos scolaires -->
    <div *ngIf="currentStep === 2" class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Classe</label>
        <select class="form-select" formControlName="class_model_id">
          <option value="" disabled selected>Choisir une classe</option>
          <option *ngFor="let classe of classes" [value]="classe.id">{{ classe.name }}</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Ann√©e acad√©mique</label>
        <input type="text" class="form-control" [value]="currentAcademicYear?.label || ''" readonly />
        <input type="hidden" formControlName="academic_year_id" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Justificatif (fichier)</label>
        <input type="file" (change)="onAcademicRecordsFileChange($event)" class="form-control" />
      </div>
    </div>

    <!-- √âTAPE 3 ‚Äî Infos parent -->
    <div *ngIf="currentStep === 3" class="row g-3">
      <div class="col-12">
        <h5 class="text-primary">üë®‚Äçüë©‚Äçüëß Informations sur le parent</h5>
      </div>
      <div class="col-md-6">
        <label class="form-label">Pr√©nom du parent</label>
        <input type="text" formControlName="parent_first_name" class="form-control" placeholder="ex. Ousmane" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Nom du parent</label>
        <input type="text" formControlName="parent_last_name" class="form-control" placeholder="ex. Fall" />
      </div>
      <div class="col-md-6">
        <label class="form-label">T√©l√©phone</label>
        <input type="text" formControlName="parent_phone" class="form-control" placeholder="77xxxxxxx" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Email</label>
        <input type="email" formControlName="parent_email" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Adresse</label>
        <input type="text" formControlName="parent_adress" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Date de naissance</label>
        <input type="date" formControlName="parent_birthday" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Sexe</label>
        <select class="form-select" formControlName="parent_gender">
          <option value="">-- S√©lectionnez --</option>
          <option value="M">Masculin</option>
          <option value="F">FÔøΩÔøΩminin</option>
        </select>
      </div>
    </div>

    <!-- Navigation boutons -->
    <div class="d-flex justify-content-between mt-4">
      <button type="button" class="btn btn-outline-primary" (click)="prevStep()" [disabled]="currentStep === 1" *ngIf="currentStep!==1">Pr√©c√©dent</button>
      <button type="button" class="btn btn-primary" (click)="nextStep()" *ngIf="currentStep < 3">Suivant</button>
      <button type="submit" class="btn btn-success" *ngIf="currentStep === 3">Enregistrer</button>
    </div>
  </form>
</div>
